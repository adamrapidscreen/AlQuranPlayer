const fs = require('fs');
const path = require('path');

const surahNamesDir = path.join(__dirname, 'assets', 'surah-names');
const outputFile = path.join(surahNamesDir, 'index.js');

// Read all files in the directory
const files = fs.readdirSync(surahNamesDir);

// Filter SVG files and extract surah numbers
const svgMap = {};

files.forEach((file) => {
  // Only process .svg files
  if (!file.endsWith('.svg')) {
    return;
  }

  // Extract number from filename (handles both "1.svg" and "001.svg")
  // Also handles edge cases like "0. surah.svg"
  const match = file.match(/^(\d+)/);
  if (match) {
    const surahNumber = parseInt(match[1], 10);
    
    // Only process valid surah numbers (1-114)
    if (surahNumber >= 1 && surahNumber <= 114) {
      const relativePath = `./${file}`;
      svgMap[surahNumber] = relativePath;
    }
  }
});

// Generate the index.js content
const entries = Object.keys(svgMap)
  .sort((a, b) => parseInt(a, 10) - parseInt(b, 10))
  .map((num) => `  ${num}: require('./${svgMap[num].replace('./', '')}'),`)
  .join('\n');

const content = `// Auto-generated file - do not edit manually
// Generated by generate-svg-index.js

export const surahNameSvgs = {
${entries}
};

export default surahNameSvgs;
`;

// Write the file
fs.writeFileSync(outputFile, content, 'utf8');

console.log(`âœ… Generated ${outputFile}`);
console.log(`   Mapped ${Object.keys(svgMap).length} SVG files`);
console.log(`   Surah numbers: ${Object.keys(svgMap).sort((a, b) => parseInt(a, 10) - parseInt(b, 10)).join(', ')}`);

